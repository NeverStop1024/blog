(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{397:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v('后期处理：简单的说就是先渲染一张图存起来，在这张图上面"添油加醋"，处理完后再渲染到屏幕上。\n工作方式是你需要创建EffectComposer然后增加一些Pass对象。每一个Pass阶段都可以增加一些后置处理特效，添加小插图，模糊，添加光晕，添加噪点，调整色相，饱和度，对比度等等。最终把效果渲染到canvas。')])]),s._v(" "),t("h2",{attrs:{id:"effectcomposer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#effectcomposer"}},[s._v("#")]),s._v(" EffectComposer")]),s._v(" "),t("p",[s._v("效果组合器，管理后期处理过程，根据通道插入顺序，来执行通道内代码（主要为着色器代码）")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 引入")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" EffectComposer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'three/examples/jsm/postprocessing/EffectComposer.js'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" effectComposer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EffectComposer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("渲染器"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"addpass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#addpass"}},[s._v("#")]),s._v(" addPass")]),s._v(" "),t("p",[s._v("给EffectComposer添加后期处理通道，可以添加多个，依次执行")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("effectComposer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("通道"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"render"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[s._v("#")]),s._v(" render")]),s._v(" "),t("p",[s._v("后期处理渲染出最终效果")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("effectComposer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"renderpass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#renderpass"}},[s._v("#")]),s._v(" RenderPass")]),s._v(" "),t("p",[s._v("RenderPass通道的作用是把场景和相机作为参数传入，获得场景的渲染结果，不对渲染结果做特定处理。"),t("br"),s._v("\n简单说就是RenderPass用来生成第一张原始图，用来传给后面通道使用，所以一般RenderPass会作为第一个通道")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" renderPass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RenderPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scene"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" camera"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"rendertoscreen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rendertoscreen"}},[s._v("#")]),s._v(" renderToScreen")]),s._v(" "),t("p",[s._v("默认值是"),t("code",[s._v("false")]),s._v("，"),t("code",[s._v("true")]),s._v("将处理的结果保存到帧缓冲区，"),t("code",[s._v("false")]),s._v("直接显示在canvas画布上面。")]),s._v(" "),t("h2",{attrs:{id:"outlinepass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#outlinepass"}},[s._v("#")]),s._v(" OutlinePass")]),s._v(" "),t("p",[s._v("该通道可以为物体（场景中被添加到通道中的物体）的边缘添加一个发光效果。"),t("a",{attrs:{href:"https://threejs.org/examples/#webgl_postprocessing_outline",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方示例"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("参数：")])]),s._v(" "),t("ul",[t("li",[s._v("vec2，一个2维分量，表示效果范围")]),s._v(" "),t("li",[s._v("scene，场景对象")]),s._v(" "),t("li",[s._v("camera，相机对象")])]),s._v(" "),t("p",[t("strong",[s._v("配置项：")])]),s._v(" "),t("ul",[t("li",[s._v("edgeStrength：边缘强度 ，默认3.0，最基础的属性，后面4个配置项都基于该项")]),s._v(" "),t("li",[s._v("edgeGlow:边缘流， 默认0.0")]),s._v(" "),t("li",[s._v("edgeThickness:边缘厚度，默认1.0")]),s._v(" "),t("li",[s._v("pulsePeriod:闪烁频率 ，默认0 ，值越大频率越低")]),s._v(" "),t("li",[s._v("usePatternTexture：选中对象使用图案纹理，默认false，不使用")]),s._v(" "),t("li",[s._v("visibleEdgeColor：边缘可见部分发光颜色，默认#FFFFFF")]),s._v(" "),t("li",[s._v("hiddenEdgeColor：边缘遮挡部分发光颜色，默认#190A05")]),s._v(" "),t("li",[s._v("selectedObjects，一个对象数组，表示使用该效果的对象")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" OutlinePass "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"three/examples/jsm/postprocessing/OutlinePass.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个纽结体")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" geometry3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TorusKnotGeometry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" material3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MeshStandardMaterial")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("emissive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x33ff33")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" torusKnot "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Mesh")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("geometry3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" material3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ntorusKnot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("position"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nscene"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("torusKnot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" outLinePass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OutlinePass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Vector2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerWidth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHeight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  scene"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  camera\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\noutLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("edgeStrength "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\noutLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("edgeGlow "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\noutLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("edgeThickness "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\noutLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pulsePeriod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\noutLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("selectedObjects "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("torusKnot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncomposer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outLinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h2",{attrs:{id:"unrealbloompass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unrealbloompass"}},[s._v("#")]),s._v(" UnrealBloomPass")]),s._v(" "),t("p",[s._v("该通道可以做发光效果,"),t("a",{attrs:{href:"https://threejs.org/examples/#webgl_postprocessing_unreal_bloom_selective",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方示例"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"官方示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方示例"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://threejs.org/docs/index.html#examples/zh/postprocessing/EffectComposer",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方示例"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://juejin.cn/post/7056255333596921892",target:"_blank",rel:"noopener noreferrer"}},[s._v("threejs-加特效-后期处理的基本使用方法"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://blog.csdn.net/qq_39503511/article/details/111031800",target:"_blank",rel:"noopener noreferrer"}},[s._v("Three.js 后期处理-物体边界线条高亮处理-OutlinePass"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.cn/post/7027401537060077575",target:"_blank",rel:"noopener noreferrer"}},[s._v("云图三维 | Three.js 后期处理 "),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);